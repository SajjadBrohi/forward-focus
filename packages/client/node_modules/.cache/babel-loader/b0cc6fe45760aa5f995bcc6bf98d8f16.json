{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.helper = exports.debugError = void 0;\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst Errors_js_1 = require(\"./Errors.js\");\n\nconst Debug_js_1 = require(\"./Debug.js\");\n\nconst fs = __importStar(require(\"fs\"));\n\nconst util_1 = require(\"util\");\n\nconst assert_js_1 = require(\"./assert.js\");\n\nconst openAsync = util_1.promisify(fs.open);\nconst writeAsync = util_1.promisify(fs.write);\nconst closeAsync = util_1.promisify(fs.close);\nexports.debugError = Debug_js_1.debug('puppeteer:error');\n\nfunction getExceptionMessage(exceptionDetails) {\n  if (exceptionDetails.exception) return exceptionDetails.exception.description || exceptionDetails.exception.value;\n  let message = exceptionDetails.text;\n\n  if (exceptionDetails.stackTrace) {\n    for (const callframe of exceptionDetails.stackTrace.callFrames) {\n      const location = callframe.url + ':' + callframe.lineNumber + ':' + callframe.columnNumber;\n      const functionName = callframe.functionName || '<anonymous>';\n      message += `\\n    at ${functionName} (${location})`;\n    }\n  }\n\n  return message;\n}\n\nfunction valueFromRemoteObject(remoteObject) {\n  assert_js_1.assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint' && typeof BigInt !== 'undefined') return BigInt(remoteObject.unserializableValue.replace('n', ''));\n\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n\n      case 'NaN':\n        return NaN;\n\n      case 'Infinity':\n        return Infinity;\n\n      case '-Infinity':\n        return -Infinity;\n\n      default:\n        throw new Error('Unsupported unserializable value: ' + remoteObject.unserializableValue);\n    }\n  }\n\n  return remoteObject.value;\n}\n\nasync function releaseObject(client, remoteObject) {\n  if (!remoteObject.objectId) return;\n  await client.send('Runtime.releaseObject', {\n    objectId: remoteObject.objectId\n  }).catch(error => {\n    // Exceptions might happen in case of a page been navigated or closed.\n    // Swallow these since they are harmless and we don't leak anything in this case.\n    exports.debugError(error);\n  });\n}\n\nfunction addEventListener(emitter, eventName, handler) {\n  emitter.on(eventName, handler);\n  return {\n    emitter,\n    eventName,\n    handler\n  };\n}\n\nfunction removeEventListeners(listeners) {\n  for (const listener of listeners) listener.emitter.removeListener(listener.eventName, listener.handler);\n\n  listeners.length = 0;\n}\n\nfunction isString(obj) {\n  return typeof obj === 'string' || obj instanceof String;\n}\n\nfunction isNumber(obj) {\n  return typeof obj === 'number' || obj instanceof Number;\n}\n\nasync function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n  let eventTimeout, resolveCallback, rejectCallback;\n  const promise = new Promise((resolve, reject) => {\n    resolveCallback = resolve;\n    rejectCallback = reject;\n  });\n  const listener = addEventListener(emitter, eventName, event => {\n    if (!predicate(event)) return;\n    resolveCallback(event);\n  });\n\n  if (timeout) {\n    eventTimeout = setTimeout(() => {\n      rejectCallback(new Errors_js_1.TimeoutError('Timeout exceeded while waiting for event'));\n    }, timeout);\n  }\n\n  function cleanup() {\n    removeEventListeners([listener]);\n    clearTimeout(eventTimeout);\n  }\n\n  const result = await Promise.race([promise, abortPromise]).then(r => {\n    cleanup();\n    return r;\n  }, error => {\n    cleanup();\n    throw error;\n  });\n  if (result instanceof Error) throw result;\n  return result;\n}\n\nfunction evaluationString(fun, ...args) {\n  if (isString(fun)) {\n    assert_js_1.assert(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n\n  function serializeArgument(arg) {\n    if (Object.is(arg, undefined)) return 'undefined';\n    return JSON.stringify(arg);\n  }\n\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n\nasync function waitWithTimeout(promise, taskName, timeout) {\n  let reject;\n  const timeoutError = new Errors_js_1.TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n  const timeoutPromise = new Promise((resolve, x) => reject = x);\n  let timeoutTimer = null;\n  if (timeout) timeoutTimer = setTimeout(() => reject(timeoutError), timeout);\n\n  try {\n    return await Promise.race([promise, timeoutPromise]);\n  } finally {\n    if (timeoutTimer) clearTimeout(timeoutTimer);\n  }\n}\n\nasync function readProtocolStream(client, handle, path) {\n  let eof = false;\n  let file;\n  if (path) file = await openAsync(path, 'w');\n  const bufs = [];\n\n  while (!eof) {\n    const response = await client.send('IO.read', {\n      handle\n    });\n    eof = response.eof;\n    const buf = Buffer.from(response.data, response.base64Encoded ? 'base64' : undefined);\n    bufs.push(buf);\n    if (path) await writeAsync(file, buf);\n  }\n\n  if (path) await closeAsync(file);\n  await client.send('IO.close', {\n    handle\n  });\n  let resultBuffer = null;\n\n  try {\n    resultBuffer = Buffer.concat(bufs);\n  } finally {\n    return resultBuffer;\n  }\n}\n\nexports.helper = {\n  evaluationString,\n  readProtocolStream,\n  waitWithTimeout,\n  waitForEvent,\n  isString,\n  isNumber,\n  addEventListener,\n  removeEventListeners,\n  valueFromRemoteObject,\n  getExceptionMessage,\n  releaseObject\n};","map":{"version":3,"sources":["C:/Users/Sajjad Brohi/JavaScript Projects/RESTful API/packages/client/node_modules/puppeteer/lib/cjs/puppeteer/common/helper.js"],"names":["__createBinding","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","hasOwnProperty","call","exports","helper","debugError","Errors_js_1","require","Debug_js_1","fs","util_1","assert_js_1","openAsync","promisify","open","writeAsync","write","closeAsync","close","debug","getExceptionMessage","exceptionDetails","exception","description","message","text","stackTrace","callframe","callFrames","location","url","lineNumber","columnNumber","functionName","valueFromRemoteObject","remoteObject","assert","objectId","unserializableValue","type","BigInt","replace","NaN","Infinity","Error","releaseObject","client","send","catch","error","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","length","isString","obj","String","isNumber","Number","waitForEvent","predicate","timeout","abortPromise","eventTimeout","resolveCallback","rejectCallback","promise","Promise","resolve","reject","event","setTimeout","TimeoutError","cleanup","clearTimeout","race","then","r","evaluationString","fun","args","serializeArgument","arg","is","JSON","stringify","map","join","waitWithTimeout","taskName","timeoutError","timeoutPromise","x","timeoutTimer","readProtocolStream","handle","path","eof","file","bufs","response","buf","Buffer","from","data","base64Encoded","push","resultBuffer","concat"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.helper = exports.debugError = void 0;\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst Errors_js_1 = require(\"./Errors.js\");\nconst Debug_js_1 = require(\"./Debug.js\");\nconst fs = __importStar(require(\"fs\"));\nconst util_1 = require(\"util\");\nconst assert_js_1 = require(\"./assert.js\");\nconst openAsync = util_1.promisify(fs.open);\nconst writeAsync = util_1.promisify(fs.write);\nconst closeAsync = util_1.promisify(fs.close);\nexports.debugError = Debug_js_1.debug('puppeteer:error');\nfunction getExceptionMessage(exceptionDetails) {\n    if (exceptionDetails.exception)\n        return (exceptionDetails.exception.description || exceptionDetails.exception.value);\n    let message = exceptionDetails.text;\n    if (exceptionDetails.stackTrace) {\n        for (const callframe of exceptionDetails.stackTrace.callFrames) {\n            const location = callframe.url +\n                ':' +\n                callframe.lineNumber +\n                ':' +\n                callframe.columnNumber;\n            const functionName = callframe.functionName || '<anonymous>';\n            message += `\\n    at ${functionName} (${location})`;\n        }\n    }\n    return message;\n}\nfunction valueFromRemoteObject(remoteObject) {\n    assert_js_1.assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n    if (remoteObject.unserializableValue) {\n        if (remoteObject.type === 'bigint' && typeof BigInt !== 'undefined')\n            return BigInt(remoteObject.unserializableValue.replace('n', ''));\n        switch (remoteObject.unserializableValue) {\n            case '-0':\n                return -0;\n            case 'NaN':\n                return NaN;\n            case 'Infinity':\n                return Infinity;\n            case '-Infinity':\n                return -Infinity;\n            default:\n                throw new Error('Unsupported unserializable value: ' +\n                    remoteObject.unserializableValue);\n        }\n    }\n    return remoteObject.value;\n}\nasync function releaseObject(client, remoteObject) {\n    if (!remoteObject.objectId)\n        return;\n    await client\n        .send('Runtime.releaseObject', { objectId: remoteObject.objectId })\n        .catch((error) => {\n        // Exceptions might happen in case of a page been navigated or closed.\n        // Swallow these since they are harmless and we don't leak anything in this case.\n        exports.debugError(error);\n    });\n}\nfunction addEventListener(emitter, eventName, handler) {\n    emitter.on(eventName, handler);\n    return { emitter, eventName, handler };\n}\nfunction removeEventListeners(listeners) {\n    for (const listener of listeners)\n        listener.emitter.removeListener(listener.eventName, listener.handler);\n    listeners.length = 0;\n}\nfunction isString(obj) {\n    return typeof obj === 'string' || obj instanceof String;\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number' || obj instanceof Number;\n}\nasync function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n    let eventTimeout, resolveCallback, rejectCallback;\n    const promise = new Promise((resolve, reject) => {\n        resolveCallback = resolve;\n        rejectCallback = reject;\n    });\n    const listener = addEventListener(emitter, eventName, (event) => {\n        if (!predicate(event))\n            return;\n        resolveCallback(event);\n    });\n    if (timeout) {\n        eventTimeout = setTimeout(() => {\n            rejectCallback(new Errors_js_1.TimeoutError('Timeout exceeded while waiting for event'));\n        }, timeout);\n    }\n    function cleanup() {\n        removeEventListeners([listener]);\n        clearTimeout(eventTimeout);\n    }\n    const result = await Promise.race([promise, abortPromise]).then((r) => {\n        cleanup();\n        return r;\n    }, (error) => {\n        cleanup();\n        throw error;\n    });\n    if (result instanceof Error)\n        throw result;\n    return result;\n}\nfunction evaluationString(fun, ...args) {\n    if (isString(fun)) {\n        assert_js_1.assert(args.length === 0, 'Cannot evaluate a string with arguments');\n        return fun;\n    }\n    function serializeArgument(arg) {\n        if (Object.is(arg, undefined))\n            return 'undefined';\n        return JSON.stringify(arg);\n    }\n    return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\nasync function waitWithTimeout(promise, taskName, timeout) {\n    let reject;\n    const timeoutError = new Errors_js_1.TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n    const timeoutPromise = new Promise((resolve, x) => (reject = x));\n    let timeoutTimer = null;\n    if (timeout)\n        timeoutTimer = setTimeout(() => reject(timeoutError), timeout);\n    try {\n        return await Promise.race([promise, timeoutPromise]);\n    }\n    finally {\n        if (timeoutTimer)\n            clearTimeout(timeoutTimer);\n    }\n}\nasync function readProtocolStream(client, handle, path) {\n    let eof = false;\n    let file;\n    if (path)\n        file = await openAsync(path, 'w');\n    const bufs = [];\n    while (!eof) {\n        const response = await client.send('IO.read', { handle });\n        eof = response.eof;\n        const buf = Buffer.from(response.data, response.base64Encoded ? 'base64' : undefined);\n        bufs.push(buf);\n        if (path)\n            await writeAsync(file, buf);\n    }\n    if (path)\n        await closeAsync(file);\n    await client.send('IO.close', { handle });\n    let resultBuffer = null;\n    try {\n        resultBuffer = Buffer.concat(bufs);\n    }\n    finally {\n        return resultBuffer;\n    }\n}\nexports.helper = {\n    evaluationString,\n    readProtocolStream,\n    waitWithTimeout,\n    waitForEvent,\n    isString,\n    isNumber,\n    addEventListener,\n    removeEventListeners,\n    valueFromRemoteObject,\n    getExceptionMessage,\n    releaseObject,\n};\n"]},"metadata":{},"sourceType":"script"}