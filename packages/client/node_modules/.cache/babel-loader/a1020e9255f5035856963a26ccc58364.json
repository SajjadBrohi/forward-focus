{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Touchscreen = exports.Mouse = exports.Keyboard = void 0;\n\nconst assert_js_1 = require(\"./assert.js\");\n\nconst USKeyboardLayout_js_1 = require(\"./USKeyboardLayout.js\");\n/**\n * Keyboard provides an api for managing a virtual keyboard.\n * The high level api is {@link Keyboard.\"type\"},\n * which takes raw characters and generates proper keydown, keypress/input,\n * and keyup events on your page.\n *\n * @remarks\n * For finer control, you can use {@link Keyboard.down},\n * {@link Keyboard.up}, and {@link Keyboard.sendCharacter}\n * to manually fire events as if they were generated from a real keyboard.\n *\n * On MacOS, keyboard shortcuts like `⌘ A` -\\> Select All do not work.\n * See {@link https://github.com/puppeteer/puppeteer/issues/1313 | #1313}.\n *\n * @example\n * An example of holding down `Shift` in order to select and delete some text:\n * ```js\n * await page.keyboard.type('Hello World!');\n * await page.keyboard.press('ArrowLeft');\n *\n * await page.keyboard.down('Shift');\n * for (let i = 0; i < ' World'.length; i++)\n *   await page.keyboard.press('ArrowLeft');\n * await page.keyboard.up('Shift');\n *\n * await page.keyboard.press('Backspace');\n * // Result text will end up saying 'Hello!'\n * ```\n *\n * @example\n * An example of pressing `A`\n * ```js\n * await page.keyboard.down('Shift');\n * await page.keyboard.press('KeyA');\n * await page.keyboard.up('Shift');\n * ```\n *\n * @public\n */\n\n\nclass Keyboard {\n  /** @internal */\n  constructor(client) {\n    /** @internal */\n    this._modifiers = 0;\n    this._pressedKeys = new Set();\n    this._client = client;\n  }\n  /**\n   * Dispatches a `keydown` event.\n   *\n   * @remarks\n   * If `key` is a single character and no modifier keys besides `Shift`\n   * are being held down, a `keypress`/`input` event will also generated.\n   * The `text` option can be specified to force an input event to be generated.\n   * If `key` is a modifier key, `Shift`, `Meta`, `Control`, or `Alt`,\n   * subsequent key presses will be sent with that modifier active.\n   * To release the modifier key, use {@link Keyboard.up}.\n   *\n   * After the key is pressed once, subsequent calls to\n   * {@link Keyboard.down} will have\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/repeat | repeat}\n   * set to true. To release the key, use {@link Keyboard.up}.\n   *\n   * Modifier keys DO influence {@link Keyboard.down}.\n   * Holding down `Shift` will type the text in upper case.\n   *\n   * @param key - Name of key to press, such as `ArrowLeft`.\n   * See {@link KeyInput} for a list of all key names.\n   *\n   * @param options - An object of options. Accepts text which, if specified,\n   * generates an input event with this text.\n   */\n\n\n  async down(key, options = {\n    text: undefined\n  }) {\n    const description = this._keyDescriptionForString(key);\n\n    const autoRepeat = this._pressedKeys.has(description.code);\n\n    this._pressedKeys.add(description.code);\n\n    this._modifiers |= this._modifierBit(description.key);\n    const text = options.text === undefined ? description.text : options.text;\n    await this._client.send('Input.dispatchKeyEvent', {\n      type: text ? 'keyDown' : 'rawKeyDown',\n      modifiers: this._modifiers,\n      windowsVirtualKeyCode: description.keyCode,\n      code: description.code,\n      key: description.key,\n      text: text,\n      unmodifiedText: text,\n      autoRepeat,\n      location: description.location,\n      isKeypad: description.location === 3\n    });\n  }\n\n  _modifierBit(key) {\n    if (key === 'Alt') return 1;\n    if (key === 'Control') return 2;\n    if (key === 'Meta') return 4;\n    if (key === 'Shift') return 8;\n    return 0;\n  }\n\n  _keyDescriptionForString(keyString) {\n    const shift = this._modifiers & 8;\n    const description = {\n      key: '',\n      keyCode: 0,\n      code: '',\n      text: '',\n      location: 0\n    };\n    const definition = USKeyboardLayout_js_1.keyDefinitions[keyString];\n    assert_js_1.assert(definition, `Unknown key: \"${keyString}\"`);\n    if (definition.key) description.key = definition.key;\n    if (shift && definition.shiftKey) description.key = definition.shiftKey;\n    if (definition.keyCode) description.keyCode = definition.keyCode;\n    if (shift && definition.shiftKeyCode) description.keyCode = definition.shiftKeyCode;\n    if (definition.code) description.code = definition.code;\n    if (definition.location) description.location = definition.location;\n    if (description.key.length === 1) description.text = description.key;\n    if (definition.text) description.text = definition.text;\n    if (shift && definition.shiftText) description.text = definition.shiftText; // if any modifiers besides shift are pressed, no text should be sent\n\n    if (this._modifiers & ~8) description.text = '';\n    return description;\n  }\n  /**\n   * Dispatches a `keyup` event.\n   *\n   * @param key - Name of key to release, such as `ArrowLeft`.\n   * See {@link KeyInput | KeyInput}\n   * for a list of all key names.\n   */\n\n\n  async up(key) {\n    const description = this._keyDescriptionForString(key);\n\n    this._modifiers &= ~this._modifierBit(description.key);\n\n    this._pressedKeys.delete(description.code);\n\n    await this._client.send('Input.dispatchKeyEvent', {\n      type: 'keyUp',\n      modifiers: this._modifiers,\n      key: description.key,\n      windowsVirtualKeyCode: description.keyCode,\n      code: description.code,\n      location: description.location\n    });\n  }\n  /**\n   * Dispatches a `keypress` and `input` event.\n   * This does not send a `keydown` or `keyup` event.\n   *\n   * @remarks\n   * Modifier keys DO NOT effect {@link Keyboard.sendCharacter | Keyboard.sendCharacter}.\n   * Holding down `Shift` will not type the text in upper case.\n   *\n   * @example\n   * ```js\n   * page.keyboard.sendCharacter('嗨');\n   * ```\n   *\n   * @param char - Character to send into the page.\n   */\n\n\n  async sendCharacter(char) {\n    await this._client.send('Input.insertText', {\n      text: char\n    });\n  }\n\n  charIsKey(char) {\n    return !!USKeyboardLayout_js_1.keyDefinitions[char];\n  }\n  /**\n   * Sends a `keydown`, `keypress`/`input`,\n   * and `keyup` event for each character in the text.\n   *\n   * @remarks\n   * To press a special key, like `Control` or `ArrowDown`,\n   * use {@link Keyboard.press}.\n   *\n   * Modifier keys DO NOT effect `keyboard.type`.\n   * Holding down `Shift` will not type the text in upper case.\n   *\n   * @example\n   * ```js\n   * await page.keyboard.type('Hello'); // Types instantly\n   * await page.keyboard.type('World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @param text - A text to type into a focused element.\n   * @param options - An object of options. Accepts delay which,\n   * if specified, is the time to wait between `keydown` and `keyup` in milliseconds.\n   * Defaults to 0.\n   */\n\n\n  async type(text, options = {}) {\n    const delay = options.delay || null;\n\n    for (const char of text) {\n      if (this.charIsKey(char)) {\n        await this.press(char, {\n          delay\n        });\n      } else {\n        if (delay) await new Promise(f => setTimeout(f, delay));\n        await this.sendCharacter(char);\n      }\n    }\n  }\n  /**\n   * Shortcut for {@link Keyboard.down}\n   * and {@link Keyboard.up}.\n   *\n   * @remarks\n   * If `key` is a single character and no modifier keys besides `Shift`\n   * are being held down, a `keypress`/`input` event will also generated.\n   * The `text` option can be specified to force an input event to be generated.\n   *\n   * Modifier keys DO effect {@link Keyboard.press}.\n   * Holding down `Shift` will type the text in upper case.\n   *\n   * @param key - Name of key to press, such as `ArrowLeft`.\n   * See {@link KeyInput} for a list of all key names.\n   *\n   * @param options - An object of options. Accepts text which, if specified,\n   * generates an input event with this text. Accepts delay which,\n   * if specified, is the time to wait between `keydown` and `keyup` in milliseconds.\n   * Defaults to 0.\n   */\n\n\n  async press(key, options = {}) {\n    const {\n      delay = null\n    } = options;\n    await this.down(key, options);\n    if (delay) await new Promise(f => setTimeout(f, options.delay));\n    await this.up(key);\n  }\n\n}\n\nexports.Keyboard = Keyboard;\n/**\n * The Mouse class operates in main-frame CSS pixels\n * relative to the top-left corner of the viewport.\n * @remarks\n * Every `page` object has its own Mouse, accessible with [`page.mouse`](#pagemouse).\n *\n * @example\n * ```js\n * // Using ‘page.mouse’ to trace a 100x100 square.\n * await page.mouse.move(0, 0);\n * await page.mouse.down();\n * await page.mouse.move(0, 100);\n * await page.mouse.move(100, 100);\n * await page.mouse.move(100, 0);\n * await page.mouse.move(0, 0);\n * await page.mouse.up();\n * ```\n *\n * **Note**: The mouse events trigger synthetic `MouseEvent`s.\n * This means that it does not fully replicate the functionality of what a normal user\n * would be able to do with their mouse.\n *\n * For example, dragging and selecting text is not possible using `page.mouse`.\n * Instead, you can use the {@link https://developer.mozilla.org/en-US/docs/Web/API/DocumentOrShadowRoot/getSelection | `DocumentOrShadowRoot.getSelection()`} functionality implemented in the platform.\n *\n * @example\n * For example, if you want to select all content between nodes:\n * ```js\n * await page.evaluate((from, to) => {\n *   const selection = from.getRootNode().getSelection();\n *   const range = document.createRange();\n *   range.setStartBefore(from);\n *   range.setEndAfter(to);\n *   selection.removeAllRanges();\n *   selection.addRange(range);\n * }, fromJSHandle, toJSHandle);\n * ```\n * If you then would want to copy-paste your selection, you can use the clipboard api:\n * ```js\n * // The clipboard api does not allow you to copy, unless the tab is focused.\n * await page.bringToFront();\n * await page.evaluate(() => {\n *   // Copy the selected content to the clipboard\n *   document.execCommand('copy');\n *   // Obtain the content of the clipboard as a string\n *   return navigator.clipboard.readText();\n * });\n * ```\n * **Note**: If you want access to the clipboard API,\n * you have to give it permission to do so:\n * ```js\n * await browser.defaultBrowserContext().overridePermissions(\n *   '<your origin>', ['clipboard-read', 'clipboard-write']\n * );\n * ```\n * @public\n */\n\nclass Mouse {\n  /**\n   * @internal\n   */\n  constructor(client, keyboard) {\n    this._x = 0;\n    this._y = 0;\n    this._button = 'none';\n    this._client = client;\n    this._keyboard = keyboard;\n  }\n  /**\n   * Dispatches a `mousemove` event.\n   * @param x - Horizontal position of the mouse.\n   * @param y - Vertical position of the mouse.\n   * @param options - Optional object. If specified, the `steps` property\n   * sends intermediate `mousemove` events when set to `1` (default).\n   */\n\n\n  async move(x, y, options = {}) {\n    const {\n      steps = 1\n    } = options;\n    const fromX = this._x,\n          fromY = this._y;\n    this._x = x;\n    this._y = y;\n\n    for (let i = 1; i <= steps; i++) {\n      await this._client.send('Input.dispatchMouseEvent', {\n        type: 'mouseMoved',\n        button: this._button,\n        x: fromX + (this._x - fromX) * (i / steps),\n        y: fromY + (this._y - fromY) * (i / steps),\n        modifiers: this._keyboard._modifiers\n      });\n    }\n  }\n  /**\n   * Shortcut for `mouse.move`, `mouse.down` and `mouse.up`.\n   * @param x - Horizontal position of the mouse.\n   * @param y - Vertical position of the mouse.\n   * @param options - Optional `MouseOptions`.\n   */\n\n\n  async click(x, y, options = {}) {\n    const {\n      delay = null\n    } = options;\n\n    if (delay !== null) {\n      await Promise.all([this.move(x, y), this.down(options)]);\n      await new Promise(f => setTimeout(f, delay));\n      await this.up(options);\n    } else {\n      await Promise.all([this.move(x, y), this.down(options), this.up(options)]);\n    }\n  }\n  /**\n   * Dispatches a `mousedown` event.\n   * @param options - Optional `MouseOptions`.\n   */\n\n\n  async down(options = {}) {\n    const {\n      button = 'left',\n      clickCount = 1\n    } = options;\n    this._button = button;\n    await this._client.send('Input.dispatchMouseEvent', {\n      type: 'mousePressed',\n      button,\n      x: this._x,\n      y: this._y,\n      modifiers: this._keyboard._modifiers,\n      clickCount\n    });\n  }\n  /**\n   * Dispatches a `mouseup` event.\n   * @param options - Optional `MouseOptions`.\n   */\n\n\n  async up(options = {}) {\n    const {\n      button = 'left',\n      clickCount = 1\n    } = options;\n    this._button = 'none';\n    await this._client.send('Input.dispatchMouseEvent', {\n      type: 'mouseReleased',\n      button,\n      x: this._x,\n      y: this._y,\n      modifiers: this._keyboard._modifiers,\n      clickCount\n    });\n  }\n  /**\n   * Dispatches a `mousewheel` event.\n   * @param options - Optional: `MouseWheelOptions`.\n   *\n   * @example\n   * An example of zooming into an element:\n   * ```js\n   * await page.goto('https://mdn.mozillademos.org/en-US/docs/Web/API/Element/wheel_event$samples/Scaling_an_element_via_the_wheel?revision=1587366');\n   *\n   * const elem = await page.$('div');\n   * const boundingBox = await elem.boundingBox();\n   * await page.mouse.move(\n   *   boundingBox.x + boundingBox.width / 2,\n   *   boundingBox.y + boundingBox.height / 2\n   * );\n   *\n   * await page.mouse.wheel({ deltaY: -100 })\n   * ```\n   */\n\n\n  async wheel(options = {}) {\n    const {\n      deltaX = 0,\n      deltaY = 0\n    } = options;\n    await this._client.send('Input.dispatchMouseEvent', {\n      type: 'mouseWheel',\n      x: this._x,\n      y: this._y,\n      deltaX,\n      deltaY,\n      modifiers: this._keyboard._modifiers,\n      pointerType: 'mouse'\n    });\n  }\n\n}\n\nexports.Mouse = Mouse;\n/**\n * The Touchscreen class exposes touchscreen events.\n * @public\n */\n\nclass Touchscreen {\n  /**\n   * @internal\n   */\n  constructor(client, keyboard) {\n    this._client = client;\n    this._keyboard = keyboard;\n  }\n  /**\n   * Dispatches a `touchstart` and `touchend` event.\n   * @param x - Horizontal position of the tap.\n   * @param y - Vertical position of the tap.\n   */\n\n\n  async tap(x, y) {\n    // Touches appear to be lost during the first frame after navigation.\n    // This waits a frame before sending the tap.\n    // @see https://crbug.com/613219\n    await this._client.send('Runtime.evaluate', {\n      expression: 'new Promise(x => requestAnimationFrame(() => requestAnimationFrame(x)))',\n      awaitPromise: true\n    });\n    const touchPoints = [{\n      x: Math.round(x),\n      y: Math.round(y)\n    }];\n    await this._client.send('Input.dispatchTouchEvent', {\n      type: 'touchStart',\n      touchPoints,\n      modifiers: this._keyboard._modifiers\n    });\n    await this._client.send('Input.dispatchTouchEvent', {\n      type: 'touchEnd',\n      touchPoints: [],\n      modifiers: this._keyboard._modifiers\n    });\n  }\n\n}\n\nexports.Touchscreen = Touchscreen;","map":{"version":3,"sources":["C:/Users/Sajjad Brohi/JavaScript Projects/RESTful API/packages/client/node_modules/puppeteer/lib/cjs/puppeteer/common/Input.js"],"names":["Object","defineProperty","exports","value","Touchscreen","Mouse","Keyboard","assert_js_1","require","USKeyboardLayout_js_1","constructor","client","_modifiers","_pressedKeys","Set","_client","down","key","options","text","undefined","description","_keyDescriptionForString","autoRepeat","has","code","add","_modifierBit","send","type","modifiers","windowsVirtualKeyCode","keyCode","unmodifiedText","location","isKeypad","keyString","shift","definition","keyDefinitions","assert","shiftKey","shiftKeyCode","length","shiftText","up","delete","sendCharacter","char","charIsKey","delay","press","Promise","f","setTimeout","keyboard","_x","_y","_button","_keyboard","move","x","y","steps","fromX","fromY","i","button","click","all","clickCount","wheel","deltaX","deltaY","pointerType","tap","expression","awaitPromise","touchPoints","Math","round"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Touchscreen = exports.Mouse = exports.Keyboard = void 0;\nconst assert_js_1 = require(\"./assert.js\");\nconst USKeyboardLayout_js_1 = require(\"./USKeyboardLayout.js\");\n/**\n * Keyboard provides an api for managing a virtual keyboard.\n * The high level api is {@link Keyboard.\"type\"},\n * which takes raw characters and generates proper keydown, keypress/input,\n * and keyup events on your page.\n *\n * @remarks\n * For finer control, you can use {@link Keyboard.down},\n * {@link Keyboard.up}, and {@link Keyboard.sendCharacter}\n * to manually fire events as if they were generated from a real keyboard.\n *\n * On MacOS, keyboard shortcuts like `⌘ A` -\\> Select All do not work.\n * See {@link https://github.com/puppeteer/puppeteer/issues/1313 | #1313}.\n *\n * @example\n * An example of holding down `Shift` in order to select and delete some text:\n * ```js\n * await page.keyboard.type('Hello World!');\n * await page.keyboard.press('ArrowLeft');\n *\n * await page.keyboard.down('Shift');\n * for (let i = 0; i < ' World'.length; i++)\n *   await page.keyboard.press('ArrowLeft');\n * await page.keyboard.up('Shift');\n *\n * await page.keyboard.press('Backspace');\n * // Result text will end up saying 'Hello!'\n * ```\n *\n * @example\n * An example of pressing `A`\n * ```js\n * await page.keyboard.down('Shift');\n * await page.keyboard.press('KeyA');\n * await page.keyboard.up('Shift');\n * ```\n *\n * @public\n */\nclass Keyboard {\n    /** @internal */\n    constructor(client) {\n        /** @internal */\n        this._modifiers = 0;\n        this._pressedKeys = new Set();\n        this._client = client;\n    }\n    /**\n     * Dispatches a `keydown` event.\n     *\n     * @remarks\n     * If `key` is a single character and no modifier keys besides `Shift`\n     * are being held down, a `keypress`/`input` event will also generated.\n     * The `text` option can be specified to force an input event to be generated.\n     * If `key` is a modifier key, `Shift`, `Meta`, `Control`, or `Alt`,\n     * subsequent key presses will be sent with that modifier active.\n     * To release the modifier key, use {@link Keyboard.up}.\n     *\n     * After the key is pressed once, subsequent calls to\n     * {@link Keyboard.down} will have\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/repeat | repeat}\n     * set to true. To release the key, use {@link Keyboard.up}.\n     *\n     * Modifier keys DO influence {@link Keyboard.down}.\n     * Holding down `Shift` will type the text in upper case.\n     *\n     * @param key - Name of key to press, such as `ArrowLeft`.\n     * See {@link KeyInput} for a list of all key names.\n     *\n     * @param options - An object of options. Accepts text which, if specified,\n     * generates an input event with this text.\n     */\n    async down(key, options = { text: undefined }) {\n        const description = this._keyDescriptionForString(key);\n        const autoRepeat = this._pressedKeys.has(description.code);\n        this._pressedKeys.add(description.code);\n        this._modifiers |= this._modifierBit(description.key);\n        const text = options.text === undefined ? description.text : options.text;\n        await this._client.send('Input.dispatchKeyEvent', {\n            type: text ? 'keyDown' : 'rawKeyDown',\n            modifiers: this._modifiers,\n            windowsVirtualKeyCode: description.keyCode,\n            code: description.code,\n            key: description.key,\n            text: text,\n            unmodifiedText: text,\n            autoRepeat,\n            location: description.location,\n            isKeypad: description.location === 3,\n        });\n    }\n    _modifierBit(key) {\n        if (key === 'Alt')\n            return 1;\n        if (key === 'Control')\n            return 2;\n        if (key === 'Meta')\n            return 4;\n        if (key === 'Shift')\n            return 8;\n        return 0;\n    }\n    _keyDescriptionForString(keyString) {\n        const shift = this._modifiers & 8;\n        const description = {\n            key: '',\n            keyCode: 0,\n            code: '',\n            text: '',\n            location: 0,\n        };\n        const definition = USKeyboardLayout_js_1.keyDefinitions[keyString];\n        assert_js_1.assert(definition, `Unknown key: \"${keyString}\"`);\n        if (definition.key)\n            description.key = definition.key;\n        if (shift && definition.shiftKey)\n            description.key = definition.shiftKey;\n        if (definition.keyCode)\n            description.keyCode = definition.keyCode;\n        if (shift && definition.shiftKeyCode)\n            description.keyCode = definition.shiftKeyCode;\n        if (definition.code)\n            description.code = definition.code;\n        if (definition.location)\n            description.location = definition.location;\n        if (description.key.length === 1)\n            description.text = description.key;\n        if (definition.text)\n            description.text = definition.text;\n        if (shift && definition.shiftText)\n            description.text = definition.shiftText;\n        // if any modifiers besides shift are pressed, no text should be sent\n        if (this._modifiers & ~8)\n            description.text = '';\n        return description;\n    }\n    /**\n     * Dispatches a `keyup` event.\n     *\n     * @param key - Name of key to release, such as `ArrowLeft`.\n     * See {@link KeyInput | KeyInput}\n     * for a list of all key names.\n     */\n    async up(key) {\n        const description = this._keyDescriptionForString(key);\n        this._modifiers &= ~this._modifierBit(description.key);\n        this._pressedKeys.delete(description.code);\n        await this._client.send('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            modifiers: this._modifiers,\n            key: description.key,\n            windowsVirtualKeyCode: description.keyCode,\n            code: description.code,\n            location: description.location,\n        });\n    }\n    /**\n     * Dispatches a `keypress` and `input` event.\n     * This does not send a `keydown` or `keyup` event.\n     *\n     * @remarks\n     * Modifier keys DO NOT effect {@link Keyboard.sendCharacter | Keyboard.sendCharacter}.\n     * Holding down `Shift` will not type the text in upper case.\n     *\n     * @example\n     * ```js\n     * page.keyboard.sendCharacter('嗨');\n     * ```\n     *\n     * @param char - Character to send into the page.\n     */\n    async sendCharacter(char) {\n        await this._client.send('Input.insertText', { text: char });\n    }\n    charIsKey(char) {\n        return !!USKeyboardLayout_js_1.keyDefinitions[char];\n    }\n    /**\n     * Sends a `keydown`, `keypress`/`input`,\n     * and `keyup` event for each character in the text.\n     *\n     * @remarks\n     * To press a special key, like `Control` or `ArrowDown`,\n     * use {@link Keyboard.press}.\n     *\n     * Modifier keys DO NOT effect `keyboard.type`.\n     * Holding down `Shift` will not type the text in upper case.\n     *\n     * @example\n     * ```js\n     * await page.keyboard.type('Hello'); // Types instantly\n     * await page.keyboard.type('World', {delay: 100}); // Types slower, like a user\n     * ```\n     *\n     * @param text - A text to type into a focused element.\n     * @param options - An object of options. Accepts delay which,\n     * if specified, is the time to wait between `keydown` and `keyup` in milliseconds.\n     * Defaults to 0.\n     */\n    async type(text, options = {}) {\n        const delay = options.delay || null;\n        for (const char of text) {\n            if (this.charIsKey(char)) {\n                await this.press(char, { delay });\n            }\n            else {\n                if (delay)\n                    await new Promise((f) => setTimeout(f, delay));\n                await this.sendCharacter(char);\n            }\n        }\n    }\n    /**\n     * Shortcut for {@link Keyboard.down}\n     * and {@link Keyboard.up}.\n     *\n     * @remarks\n     * If `key` is a single character and no modifier keys besides `Shift`\n     * are being held down, a `keypress`/`input` event will also generated.\n     * The `text` option can be specified to force an input event to be generated.\n     *\n     * Modifier keys DO effect {@link Keyboard.press}.\n     * Holding down `Shift` will type the text in upper case.\n     *\n     * @param key - Name of key to press, such as `ArrowLeft`.\n     * See {@link KeyInput} for a list of all key names.\n     *\n     * @param options - An object of options. Accepts text which, if specified,\n     * generates an input event with this text. Accepts delay which,\n     * if specified, is the time to wait between `keydown` and `keyup` in milliseconds.\n     * Defaults to 0.\n     */\n    async press(key, options = {}) {\n        const { delay = null } = options;\n        await this.down(key, options);\n        if (delay)\n            await new Promise((f) => setTimeout(f, options.delay));\n        await this.up(key);\n    }\n}\nexports.Keyboard = Keyboard;\n/**\n * The Mouse class operates in main-frame CSS pixels\n * relative to the top-left corner of the viewport.\n * @remarks\n * Every `page` object has its own Mouse, accessible with [`page.mouse`](#pagemouse).\n *\n * @example\n * ```js\n * // Using ‘page.mouse’ to trace a 100x100 square.\n * await page.mouse.move(0, 0);\n * await page.mouse.down();\n * await page.mouse.move(0, 100);\n * await page.mouse.move(100, 100);\n * await page.mouse.move(100, 0);\n * await page.mouse.move(0, 0);\n * await page.mouse.up();\n * ```\n *\n * **Note**: The mouse events trigger synthetic `MouseEvent`s.\n * This means that it does not fully replicate the functionality of what a normal user\n * would be able to do with their mouse.\n *\n * For example, dragging and selecting text is not possible using `page.mouse`.\n * Instead, you can use the {@link https://developer.mozilla.org/en-US/docs/Web/API/DocumentOrShadowRoot/getSelection | `DocumentOrShadowRoot.getSelection()`} functionality implemented in the platform.\n *\n * @example\n * For example, if you want to select all content between nodes:\n * ```js\n * await page.evaluate((from, to) => {\n *   const selection = from.getRootNode().getSelection();\n *   const range = document.createRange();\n *   range.setStartBefore(from);\n *   range.setEndAfter(to);\n *   selection.removeAllRanges();\n *   selection.addRange(range);\n * }, fromJSHandle, toJSHandle);\n * ```\n * If you then would want to copy-paste your selection, you can use the clipboard api:\n * ```js\n * // The clipboard api does not allow you to copy, unless the tab is focused.\n * await page.bringToFront();\n * await page.evaluate(() => {\n *   // Copy the selected content to the clipboard\n *   document.execCommand('copy');\n *   // Obtain the content of the clipboard as a string\n *   return navigator.clipboard.readText();\n * });\n * ```\n * **Note**: If you want access to the clipboard API,\n * you have to give it permission to do so:\n * ```js\n * await browser.defaultBrowserContext().overridePermissions(\n *   '<your origin>', ['clipboard-read', 'clipboard-write']\n * );\n * ```\n * @public\n */\nclass Mouse {\n    /**\n     * @internal\n     */\n    constructor(client, keyboard) {\n        this._x = 0;\n        this._y = 0;\n        this._button = 'none';\n        this._client = client;\n        this._keyboard = keyboard;\n    }\n    /**\n     * Dispatches a `mousemove` event.\n     * @param x - Horizontal position of the mouse.\n     * @param y - Vertical position of the mouse.\n     * @param options - Optional object. If specified, the `steps` property\n     * sends intermediate `mousemove` events when set to `1` (default).\n     */\n    async move(x, y, options = {}) {\n        const { steps = 1 } = options;\n        const fromX = this._x, fromY = this._y;\n        this._x = x;\n        this._y = y;\n        for (let i = 1; i <= steps; i++) {\n            await this._client.send('Input.dispatchMouseEvent', {\n                type: 'mouseMoved',\n                button: this._button,\n                x: fromX + (this._x - fromX) * (i / steps),\n                y: fromY + (this._y - fromY) * (i / steps),\n                modifiers: this._keyboard._modifiers,\n            });\n        }\n    }\n    /**\n     * Shortcut for `mouse.move`, `mouse.down` and `mouse.up`.\n     * @param x - Horizontal position of the mouse.\n     * @param y - Vertical position of the mouse.\n     * @param options - Optional `MouseOptions`.\n     */\n    async click(x, y, options = {}) {\n        const { delay = null } = options;\n        if (delay !== null) {\n            await Promise.all([this.move(x, y), this.down(options)]);\n            await new Promise((f) => setTimeout(f, delay));\n            await this.up(options);\n        }\n        else {\n            await Promise.all([\n                this.move(x, y),\n                this.down(options),\n                this.up(options),\n            ]);\n        }\n    }\n    /**\n     * Dispatches a `mousedown` event.\n     * @param options - Optional `MouseOptions`.\n     */\n    async down(options = {}) {\n        const { button = 'left', clickCount = 1 } = options;\n        this._button = button;\n        await this._client.send('Input.dispatchMouseEvent', {\n            type: 'mousePressed',\n            button,\n            x: this._x,\n            y: this._y,\n            modifiers: this._keyboard._modifiers,\n            clickCount,\n        });\n    }\n    /**\n     * Dispatches a `mouseup` event.\n     * @param options - Optional `MouseOptions`.\n     */\n    async up(options = {}) {\n        const { button = 'left', clickCount = 1 } = options;\n        this._button = 'none';\n        await this._client.send('Input.dispatchMouseEvent', {\n            type: 'mouseReleased',\n            button,\n            x: this._x,\n            y: this._y,\n            modifiers: this._keyboard._modifiers,\n            clickCount,\n        });\n    }\n    /**\n     * Dispatches a `mousewheel` event.\n     * @param options - Optional: `MouseWheelOptions`.\n     *\n     * @example\n     * An example of zooming into an element:\n     * ```js\n     * await page.goto('https://mdn.mozillademos.org/en-US/docs/Web/API/Element/wheel_event$samples/Scaling_an_element_via_the_wheel?revision=1587366');\n     *\n     * const elem = await page.$('div');\n     * const boundingBox = await elem.boundingBox();\n     * await page.mouse.move(\n     *   boundingBox.x + boundingBox.width / 2,\n     *   boundingBox.y + boundingBox.height / 2\n     * );\n     *\n     * await page.mouse.wheel({ deltaY: -100 })\n     * ```\n     */\n    async wheel(options = {}) {\n        const { deltaX = 0, deltaY = 0 } = options;\n        await this._client.send('Input.dispatchMouseEvent', {\n            type: 'mouseWheel',\n            x: this._x,\n            y: this._y,\n            deltaX,\n            deltaY,\n            modifiers: this._keyboard._modifiers,\n            pointerType: 'mouse',\n        });\n    }\n}\nexports.Mouse = Mouse;\n/**\n * The Touchscreen class exposes touchscreen events.\n * @public\n */\nclass Touchscreen {\n    /**\n     * @internal\n     */\n    constructor(client, keyboard) {\n        this._client = client;\n        this._keyboard = keyboard;\n    }\n    /**\n     * Dispatches a `touchstart` and `touchend` event.\n     * @param x - Horizontal position of the tap.\n     * @param y - Vertical position of the tap.\n     */\n    async tap(x, y) {\n        // Touches appear to be lost during the first frame after navigation.\n        // This waits a frame before sending the tap.\n        // @see https://crbug.com/613219\n        await this._client.send('Runtime.evaluate', {\n            expression: 'new Promise(x => requestAnimationFrame(() => requestAnimationFrame(x)))',\n            awaitPromise: true,\n        });\n        const touchPoints = [{ x: Math.round(x), y: Math.round(y) }];\n        await this._client.send('Input.dispatchTouchEvent', {\n            type: 'touchStart',\n            touchPoints,\n            modifiers: this._keyboard._modifiers,\n        });\n        await this._client.send('Input.dispatchTouchEvent', {\n            type: 'touchEnd',\n            touchPoints: [],\n            modifiers: this._keyboard._modifiers,\n        });\n    }\n}\nexports.Touchscreen = Touchscreen;\n"]},"metadata":{},"sourceType":"script"}